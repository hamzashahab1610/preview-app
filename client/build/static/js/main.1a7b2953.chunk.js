(this["webpackJsonpreact-upload-download-files"]=this["webpackJsonpreact-upload-download-files"]||[]).push([[0],{20:function(e,t,a){},40:function(e,t,a){e.exports=a(78)},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),c=a.n(l),i=a(15),o=a(5),s=a(6),u=a.n(s),m=a(14),d=a(10),p=a(13),f=a.n(p),h=a(80),b=a(81),g="http://localhost:3030",v=a(23);var E=function(e){var t=e.setUrl,a=e.setTitle,n=e.setThumbnailUrl;return r.a.createElement("div",null,r.a.createElement(v.b,null),r.a.createElement(v.a,{sources:["local"],sourceKeys:{dropboxAppKey:"1dsf42dl1i2",instagramClientId:"d7aadf962m"},cloudName:"dcvjvqymt",uploadPreset:"lj3vitxo",buttonText:"Upload File",style:{color:"white",border:"none",width:"120px",backgroundColor:"#1890FF",borderRadius:"4px",height:"40px"},cropping:!1,onSuccess:function(e){console.log("result",e);var r=e.info.thumbnail_url;if(r){var l=r.indexOf("h_"),c=r.indexOf("w_"),i=r.slice(l,l+4),o=r.slice(c,c+4);console.log("h",i),console.log("w",o),r=(r=r.replace(i,"h_400")).replace(o,"w_400")}console.log("thumbnail",r),t(e.info.secure_url),a(e.info.original_filename),n(r)},onFailure:function(e){console.log("response",e)},logging:!1,customPublicId:"sample",eager:"w_400,h_300,c_pad|w_260,h_200,c_crop",use_filename:!0}))},w=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),o=Object(d.a)(i,2),s=o[0],p=o[1],v=Object(n.useState)(""),w=Object(d.a)(v,2),x=w[0],y=w[1],j=Object(n.useState)(""),O=Object(d.a)(j,2),_=(O[0],O[1],function(){var t=Object(m.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,f.a.post("".concat(g,"/upload"),{title:s,url:l,thumbnailUrl:x});case 3:e.history.push("/list");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(E,{setUrl:c,setTitle:p,setThumbnailUrl:y}),r.a.createElement("span",{style:{marginLeft:"2rem"}},s)),r.a.createElement(h.a,{className:"search-form",onSubmit:function(e){return _(e)},style:{marginTop:"1rem"}},r.a.createElement("div",{className:"upload-section"}),r.a.createElement(b.a,{variant:"primary",type:"submit"},"Submit")))},x=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"File Upload And Download"),r.a.createElement("nav",null,r.a.createElement(i.b,{activeClassName:"active",to:"/",exact:!0},"Home"),r.a.createElement(i.b,{activeClassName:"active",to:"/list"},"Files List")))},y=(a(20),a(16)),j=a.n(y);var O=function(e){var t=e.img,a=e.title,l=e.url,c=e.id,i=Object(n.useState)(""),o=Object(d.a)(i,2),s=(o[0],o[1]),p=r.a.useState(!1),h=Object(d.a)(p,2),b=h[0],v=h[1],E=function(){var e=Object(m.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.href=a;case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("".concat(g,"/delete/").concat(t)).then((function(){"undefined"!==typeof window&&window.location.reload(!0)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&s("Error while deleting file. Try again later");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{isOpen:b,onRequestClose:function(){v(!1)},style:{content:{top:"3%",left:"2%",width:"95%",height:"95vh",background:"white",overflow:"hidden"}},contentLabel:"Example Modal"},l.includes("png")||l.includes("svg")||l.includes("jpeg")||l.includes("jpg")?r.a.createElement("img",{src:l,width:"100%",height:"100%",frameborder:"0"}):l.includes("doc")||l.includes("docx")||l.includes("xls")||l.includes("xlsx")||l.includes("ppt")||l.includes("pptx")?r.a.createElement("iframe",{src:"https://view.officeapps.live.com/op/embed.aspx?src=".concat(l),width:"100%",height:"100%",frameborder:"0"}):r.a.createElement("iframe",{width:"100%",height:"100%",frameborder:"0",src:l})),r.a.createElement("div",{className:"file-card-container"},r.a.createElement("div",{className:"img-container",onClick:function(){v(!0)}},r.a.createElement("img",{className:"file-card-img",src:t,alt:""})),r.a.createElement("hr",null),r.a.createElement("div",{className:"file-card-bottom"},r.a.createElement("div",{style:{width:"50%"}},a),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return E(a,l)}},"Download"),r.a.createElement("button",{onClick:function(){return w(c)},style:{marginLeft:"10px"}},"Delete")))))},_=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),i=Object(d.a)(c,2),o=(i[0],i[1]),s=Object(n.useState)(""),p=Object(d.a)(s,2),h=(p[0],p[1]);return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("".concat(g,"/getAllFiles"));case 3:t=e.sent,a=t.data,console.log("data",a),o(""),l(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response&&o(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:"files-container"},r.a.createElement("div",{style:{marginBottom:"1rem"}},r.a.createElement("label",{style:{marginRight:"1rem",fontWeight:"bold"}},"Search"),r.a.createElement("input",{style:{paddingLeft:"0.5rem"},type:"text",onChange:function(e){return h(e.target.value.toLocaleLowerCase())}})),r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gridGap:"1.5rem"}},a.map((function(e){return r.a.createElement(O,{url:e.url,img:e.thumbnail,title:e.title,id:e._id})}))))},k=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"hello"},r.a.createElement(x,null),r.a.createElement("div",{className:"main-content"},r.a.createElement(o.c,null,r.a.createElement(o.a,{component:w,path:"/",exact:!0}),r.a.createElement(o.a,{component:_,path:"/list"})))))};a(77);j.a.setAppElement("body"),c.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1a7b2953.chunk.js.map