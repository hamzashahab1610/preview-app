(this["webpackJsonpreact-upload-download-files"]=this["webpackJsonpreact-upload-download-files"]||[]).push([[0],{45:function(e,t,a){e.exports=a(86)},85:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),c=a.n(l),o=a(15),s=a(6),i=a(11),u=a.n(i),p=a(13),m=a(17),d=a(23),f=a(7),h=a(44),E=a(14),b=a.n(E),v=a(89),g=a(88),w=a(40),y=a(90),O="https://react-preview-app.azurewebsites.net",j=function(e){var t=Object(n.useState)(null),a=Object(f.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),s=Object(f.a)(o,2),i=(s[0],s[1]),E=Object(n.useState)({title:"",description:""}),j=Object(f.a)(E,2),x=j[0],k=j[1],C=Object(n.useState)(""),N=Object(f.a)(C,2),S=N[0],D=N[1],F=Object(n.useState)(!1),L=Object(f.a)(F,2),T=(L[0],L[1]),R=Object(n.useRef)(),P=function(e){k(Object(d.a)(Object(d.a)({},x),{},Object(m.a)({},e.target.name,e.target.value)))},A=function(e){"over"===e?R.current.style.border="2px solid #000":"leave"===e&&(R.current.style.border="2px dashed #e9ebeb")},I=function(){var t=Object(p.a)(u.a.mark((function t(a){var n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),t.prev=1,n=x.title,r=x.description,""===n.trim()||""===r.trim()){t.next=18;break}if(!l){t.next=15;break}return(c=new FormData).append("file",l),c.append("title",n),c.append("description",r),D(""),t.next=12,b.a.post("".concat(O,"/upload"),c,{headers:{"Content-Type":"multipart/form-data"}});case 12:e.history.push("/list"),t.next=16;break;case 15:D("Please select a file to add.");case 16:t.next=19;break;case 18:D("Please enter all the field values.");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),t.t0.response&&D(t.t0.response.data);case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{className:"search-form",onSubmit:I},S&&r.a.createElement("p",{className:"errorMsg"},S),r.a.createElement(g.a,null,r.a.createElement(w.a,null,r.a.createElement(v.a.Group,{controlId:"title"},r.a.createElement(v.a.Control,{type:"text",name:"title",value:x.title||"",placeholder:"Enter title",onChange:P})))),r.a.createElement(g.a,null,r.a.createElement(w.a,null,r.a.createElement(v.a.Group,{controlId:"description"},r.a.createElement(v.a.Control,{type:"text",name:"description",value:x.description||"",placeholder:"Enter description",onChange:P})))),r.a.createElement("div",{className:"upload-section"},r.a.createElement(h.a,{onDrop:function(e){console.log("files",e);var t=Object(f.a)(e,1)[0];c(t);var a=new FileReader;a.onload=function(){i(a.result)},a.readAsDataURL(t),T(t.name.match(/\.(jpeg|jpg|png)$/)),R.current.style.border="2px dashed #e9ebeb"},onDragEnter:function(){return A("over")},onDragLeave:function(){return A("leave")}},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",Object.assign({},t({className:"drop-zone"}),{ref:R}),r.a.createElement("input",a()),r.a.createElement("p",null,"Drag and drop a file OR click here to select a file"),l&&r.a.createElement("div",null,r.a.createElement("strong",null,"Selected file:")," ",l.name))}))),r.a.createElement(y.a,{variant:"primary",type:"submit"},"Submit")))},x=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"File Upload And Download"),r.a.createElement("nav",null,r.a.createElement(o.b,{activeClassName:"active",to:"/",exact:!0},"Home"),r.a.createElement(o.b,{activeClassName:"active",to:"/list"},"Files List")))},k=a(42),C=a.n(k);a(74);var N=a(18),S=a.n(N),D=a(43),F=a.n(D);var L=function(e){var t=e.type,a=e.url;return r.a.createElement(F.a,{fileType:t,filePath:a})},T=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),o=Object(f.a)(c,2),s=o[0],i=o[1],m=Object(n.useState)(),d=Object(f.a)(m,2),h=d[0],E=d[1],v=Object(n.useState)(!1),g=Object(f.a)(v,2),w=g[0],y=g[1],j=Object(n.useState)({id:"",type:"",path:""}),x=Object(f.a)(j,2),k=x[0],N=x[1],D=Object(n.useState)(""),F=Object(f.a)(D,2),T=F[0],R=F[1],P=r.a.useState(!1),A=Object(f.a)(P,2),I=A[0],_=A[1];Object(n.useEffect)((function(){(function(){var e=Object(p.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(O,"/getAllFiles"));case 3:t=e.sent,a=t.data,console.log("data",a),i(""),l(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response&&i(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var M,z=function(){var e=Object(p.a)(u.a.mark((function e(t,a,n){var r,l,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(O,"/download/").concat(t),{responseType:"blob"});case 3:return r=e.sent,l=a.split("/"),c=l[l.length-1],i(""),e.abrupt("return",C()(r.data,c,n));case 10:e.prev=10,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&i("Error while downloading file. Try again later");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(O,"/delete/").concat(t)).then((function(){"undefined"!==typeof window&&window.location.reload(!0)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&i("Error while deleting file. Try again later");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(u.a.mark((function e(t,a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N({id:t,path:a,type:n}),y(!0),e.prev=2,e.next=5,b.a.get("".concat(O,"/download/").concat(t),{responseType:"blob"});case 5:r=e.sent,E(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0.response&&400===e.t0.response.status&&i("Error while previewing file. Try again later");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a,n){return e.apply(this,arguments)}}();return console.log("search",T),console.log("file response",h),console.log("download file",k),r.a.createElement("div",{className:"files-container"},r.a.createElement(S.a,{isOpen:I,onAfterOpen:function(){},onRequestClose:function(){E(),_(!1),y(!1)},style:{content:{top:"1%",left:"3%",width:"95%",height:"95vh",background:"white"}},contentLabel:"Example Modal"},r.a.createElement("button",{style:{float:"right",padding:"0.5rem 1rem"},onClick:function(){return z(k.id,k.path,k.type)}},"Download"),w&&void 0!==h?(M=h.data.type).includes("sheet")||M.includes("excel")?(console.log("excellll"),r.a.createElement(L,{type:"xlsx",url:h.config.url})):M.includes("doc")?(console.log("docccc"),r.a.createElement(L,{type:"docx",url:h.config.url})):(console.log("otherrrr"),r.a.createElement("object",{width:"100%",height:"100%",data:h.config.url},r.a.createElement("param",{name:"src",value:h.config.url}),r.a.createElement("param",{name:"readonly",value:"false"}))):null),r.a.createElement("div",{style:{marginBottom:"1rem"}},r.a.createElement("label",{style:{marginRight:"1rem",fontWeight:"bold"}},"Search"),r.a.createElement("input",{style:{paddingLeft:"0.5rem"},type:"text",onChange:function(e){return R(e.target.value.toLocaleLowerCase())}})),w?null:r.a.createElement(r.a.Fragment,null,s&&r.a.createElement("p",{className:"errorMsg"},s),r.a.createElement("table",{className:"files-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"File Name"),r.a.createElement("th",null,"Delete File"),r.a.createElement("th",null,"Download File"))),r.a.createElement("tbody",null,a.length>0?a.map((function(e){var t=e._id,a=e.title,n=e.description,l=e.file_path,c=e.file_mimetype;if(a.toLowerCase().search(T)>-1||n.toLowerCase().search(T)>-1||l.toLowerCase().search(T)>-1)return r.a.createElement("tr",{key:t},r.a.createElement("td",{className:"file-title"},a),r.a.createElement("td",{className:"file-description"},r.a.createElement("a",{href:"#/",onClick:function(){_(!0),G(t,l,c)}},n)),r.a.createElement("td",{className:"file-title"},l.replace("".concat(l.substr(0,l.indexOf("_")+1)),"")),r.a.createElement("td",null,r.a.createElement("a",{href:"#/",onClick:function(){return B(t)}},"Delete")),r.a.createElement("td",null,r.a.createElement("a",{href:"#/",onClick:function(){return z(t,l,c)}},"Download")))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:5,style:{fontWeight:"300"}},"No files found. Please add some."))))))},R=function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(x,null),r.a.createElement("div",{className:"main-content"},r.a.createElement(s.c,null,r.a.createElement(s.a,{component:j,path:"/",exact:!0}),r.a.createElement(s.a,{component:T,path:"/list"})))))};a(84),a(85);S.a.setAppElement("body"),c.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.a450168a.chunk.js.map